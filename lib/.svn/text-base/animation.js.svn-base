var timer_is_on=0;
var c=0;	//counter for animation
var t;
var overlaysArray=[];
var isFirstTime=true;

function foo()
{
	/*
	var imageBounds=new google.maps.LatLngBounds(
	    	new google.maps.LatLng(16.51,-97,87),
	    	new google.maps.LatLng(36.39,-69.70));
	*/
	/*
    var oldmap0=new google.maps.GroundOverlay(
        	"./image/20110111_0000.png",imageBounds);
    var oldmap1=new google.maps.GroundOverlay(
        	"./image/20110111_0300.png",imageBounds);
    var oldmap2=new google.maps.GroundOverlay(
        	"./image/20110111_0600.png",imageBounds);
    
    overlaysArray.push(oldmap0);
    overlaysArray.push(oldmap1);
    overlaysArray.push(oldmap2);      
     */
	
	/*


	*/
	
	overlaysArray=[];
	$('input:button')[0].disabled="disabled";
	$('input:button')[1].disabled="";
	
	if (overlay!=null)
		overlay.setMap(null);
	
	var length=availableDates.length;
	for (i=length-4;i<length;i++){
		for(j=0;j<=21;j+=3){
			d1=availableDates[i];
			setDate(d1,j);
			overlay=new google.maps.GroundOverlay(
					"servlet/GetImage?"+
					"day="+d1+"&"+
					"date="+date+"&"+
					"variable="+variable+"&"+
					"depth="+depth
					,imageBounds);
			overlaysArray.push(overlay);
		}
	}
	doTimer();
}

function animation()
{
	if (isFirstTime!=true && c!=0)
		overlaysArray[c-1].setMap(null);
	else if (c==0)
		overlaysArray[overlaysArray.length-1].setMap(null);
	isFirstTime=false;
	overlaysArray[c].setMap(map);
	t=setTimeout("animation()",1000);
	c=(c+1)%overlaysArray.length;
	
}

function clearOverlays(){
	if (overlaysArray){
		for(i in overlaysArray){
			overlaysArray[i].setMap(null);
		}
	}
}

function showOverlays(){
	if (overlaysArray){
		for(i in overlaysArray){
			overlaysArray[i].setMap(map);
		}
	}
}

function doTimer()
{
if (!timer_is_on)
  {
  timer_is_on=1;
  animation();
  }
}

function stopCount()
{
clearTimeout(t);
timer_is_on=0;
isFirstTime=true;
clearOverlays();

$('input:button')[1].disabled="disabled";
$('input:button')[0].disabled="";

}

